# مستند المتطلبات - تطبيق التواصل الاجتماعي

## المقدمة

تطبيق تواصل اجتماعي وتعارف موجه للسوق العربي، يجمع بين الخصوصية والأمان مع ميزات اجتماعية حديثة. يوفر التطبيق بيئة آمنة تراعي العادات والقيم المحلية، مع إمكانية التواصل المجهول الاختياري.

## المصطلحات

- **النظام**: تطبيق التواصل الاجتماعي المطور باستخدام Flutter و Firebase
- **المستخدم**: أي شخص مسجل في التطبيق
- **OTP**: رمز التحقق لمرة واحدة (One-Time Password)
- **الشفل**: نظام الاستكشاف العشوائي للمستخدمين
- **القصص**: محتوى مؤقت يظهر لمدة 24 ساعة
- **التمويه**: خاصية إخفاء الصورة الشخصية جزئياً
- **المشرف**: مسؤول النظام الذي يدير المحتوى والمستخدمين

## المتطلبات

### المتطلب 1: التوثيق والتسجيل الآمن

**قصة المستخدم:** كمستخدم جديد، أريد التسجيل في التطبيق بشكل آمن باستخدام رقم هاتفي، حتى أتمكن من إنشاء حساب موثوق.

#### معايير القبول

1. WHEN المستخدم يدخل رقم هاتف صالح THEN النظام SHALL يرسل رمز OTP إلى ذلك الرقم
2. WHEN المستخدم يدخل رمز OTP صحيح THEN النظام SHALL يقوم بإنشاء حساب جديد أو تسجيل الدخول للحساب الموجود
3. WHEN المستخدم يدخل رمز OTP خاطئ ثلاث مرات متتالية THEN النظام SHALL يمنع المحاولات لمدة 5 دقائق
4. WHEN المستخدم يطلب إعادة إرسال رمز OTP THEN النظام SHALL يرسل رمز جديد بعد مرور 60 ثانية من الطلب السابق
5. THE النظام SHALL يحفظ معلومات الجلسة بشكل آمن باستخدام Firebase Authentication

### المتطلب 2: إدارة الملف الشخصي

**قصة المستخدم:** كمستخدم، أريد التحكم في ظهور معلوماتي الشخصية وصورتي، حتى أحافظ على خصوصيتي.

#### معايير القبول

1. WHEN المستخدم يقوم برفع صورة شخصية THEN النظام SHALL يحفظ الصورة في Firebase Storage ويربطها بالملف الشخصي
2. WHEN المستخدم يفعّل خيار التمويه THEN النظام SHALL يطبق تأثير blur على الصورة الشخصية عند عرضها للآخرين
3. WHEN المستخدم يقوم بإنشاء رابط شخصي مجهول THEN النظام SHALL يولد رابط فريد يمكن مشاركته دون الكشف عن الهوية
4. THE النظام SHALL يسمح للمستخدم بتحديث الاسم والعمر والدولة واللهجة في أي وقت
5. WHEN المستخدم يحفظ تغييرات الملف الشخصي THEN النظام SHALL يحدّث البيانات في Firestore فوراً

### المتطلب 3: نظام الدردشة والرسائل

**قصة المستخدم:** كمستخدم، أريد التواصل مع مستخدمين آخرين عبر الرسائل النصية والصوتية، حتى أتمكن من بناء علاقات اجتماعية.

#### معايير القبول

1. WHEN المستخدم يرسل رسالة نصية THEN النظام SHALL يحفظ الرسالة في Firestore ويرسلها للمستقبل في الوقت الفعلي
2. WHEN المستخدم يسجل رسالة صوتية THEN النظام SHALL يحفظ الملف الصوتي في Firebase Storage ويرسل رابطه للمستقبل
3. WHEN المستخدم يستقبل رسالة جديدة WHILE التطبيق مفتوح THEN النظام SHALL يعرض الرسالة فوراً دون الحاجة لتحديث الصفحة
4. WHEN المستخدم يستقبل رسالة جديدة WHILE التطبيق مغلق THEN النظام SHALL يرسل إشعار push notification
5. THE النظام SHALL يعرض الرسائل مرتبة حسب الوقت من الأقدم للأحدث

### المتطلب 4: نظام الاستكشاف (الشفل)

**قصة المستخدم:** كمستخدم، أريد اكتشاف مستخدمين جدد بشكل عشوائي أو حسب معايير محددة، حتى أتمكن من توسيع دائرة معارفي.

#### معايير القبول

1. WHEN المستخدم يضغط على زر الشفل THEN النظام SHALL يعرض ملف شخصي عشوائي لمستخدم آخر
2. WHEN المستخدم يطبق فلتر البحث حسب الدولة THEN النظام SHALL يعرض فقط المستخدمين من تلك الدولة
3. WHEN المستخدم يطبق فلتر البحث حسب اللهجة THEN النظام SHALL يعرض فقط المستخدمين الذين يتحدثون تلك اللهجة
4. WHEN المستخدم يطبق فلاتر متعددة THEN النظام SHALL يعرض المستخدمين الذين يطابقون جميع الفلاتر المحددة
5. THE النظام SHALL يستثني المستخدمين المحظورين من نتائج الاستكشاف

### المتطلب 5: القصص (Stories)

**قصة المستخدم:** كمستخدم، أريد نشر ومشاهدة قصص مؤقتة، حتى أشارك لحظاتي اليومية وأتفاعل مع الآخرين.

#### معايير القبول

1. WHEN المستخدم ينشر قصة جديدة THEN النظام SHALL يحفظ القصة مع timestamp وتاريخ انتهاء بعد 24 ساعة
2. WHEN مرور 24 ساعة على نشر القصة THEN النظام SHALL يحذف القصة تلقائياً من قاعدة البيانات
3. WHEN المستخدم يشاهد قصة THEN النظام SHALL يسجل المشاهدة ويعرضها لصاحب القصة
4. THE النظام SHALL يعرض القصص في شريط أفقي في الشاشة الرئيسية مرتبة حسب الأحدث
5. WHEN المستخدم يضغط على قصة THEN النظام SHALL يعرض القصة في وضع ملء الشاشة مع إمكانية التنقل بين القصص

### المتطلب 6: الأمان والإبلاغ

**قصة المستخدم:** كمستخدم، أريد حظر المستخدمين المزعجين والإبلاغ عن المحتوى غير اللائق، حتى أحافظ على تجربة استخدام آمنة.

#### معايير القبول

1. WHEN المستخدم يحظر مستخدم آخر THEN النظام SHALL يمنع ذلك المستخدم من إرسال رسائل أو رؤية الملف الشخصي
2. WHEN المستخدم يبلغ عن محتوى غير لائق THEN النظام SHALL يحفظ البلاغ مع تفاصيله ويرسله للمشرفين
3. WHEN المشرف يراجع بلاغ THEN النظام SHALL يعرض المحتوى المبلغ عنه مع معلومات المستخدم المبلغ والمبلغ عنه
4. WHEN المشرف يتخذ إجراء على بلاغ THEN النظام SHALL يحدّث حالة البلاغ ويطبق الإجراء المناسب (تحذير، حظر، حذف محتوى)
5. THE النظام SHALL يحتفظ بسجل كامل لجميع البلاغات والإجراءات المتخذة

### المتطلب 7: دعم اللغة العربية والواجهة

**قصة المستخدم:** كمستخدم عربي، أريد استخدام التطبيق بلغتي الأم مع واجهة تدعم الاتجاه من اليمين لليسار، حتى أحصل على تجربة مريحة وطبيعية.

#### معايير القبول

1. THE النظام SHALL يعرض جميع النصوص والواجهات باللغة العربية بشكل افتراضي
2. THE النظام SHALL يدعم الاتجاه من اليمين لليسار (RTL) في جميع الشاشات
3. THE النظام SHALL يوفر وضع الظلام (Dark Mode) كخيار افتراضي
4. WHEN المستخدم يغير إعدادات اللغة أو الوضع THEN النظام SHALL يحفظ التفضيلات ويطبقها فوراً
5. THE النظام SHALL يستخدم خطوط عربية واضحة ومقروءة في جميع العناصر

### المتطلب 8: إدارة البيانات والتخزين

**قصة المستخدم:** كمطور نظام، أريد تخزين وإدارة البيانات بشكل فعال وآمن، حتى يعمل التطبيق بسلاسة ويحافظ على خصوصية المستخدمين.

#### معايير القبول

1. WHEN النظام يحفظ بيانات مستخدم THEN النظام SHALL يستخدم Firestore لتخزين البيانات النصية المنظمة
2. WHEN النظام يحفظ ملفات وسائط (صور، صوت) THEN النظام SHALL يستخدم Firebase Storage مع تشفير الملفات
3. WHEN المستخدم يحذف حسابه THEN النظام SHALL يحذف جميع بياناته الشخصية والمحتوى المرتبط به خلال 30 يوم
4. THE النظام SHALL يطبق قواعد أمان Firebase لمنع الوصول غير المصرح به للبيانات
5. WHEN النظام يقرأ بيانات في الوقت الفعلي THEN النظام SHALL يستخدم Firestore snapshots للحصول على تحديثات فورية
